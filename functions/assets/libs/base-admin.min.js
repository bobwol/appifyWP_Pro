jQuery(document).ready(function(e){function t(e,t){t=t||"yyyy-mm-dd";var n=e.match(/(\d+)/g),r=0,i={};t.replace(/(yyyy|dd|mm)/g,function(e){i[e]=r++});return new Date(Date.UTC(n[i.yyyy],n[i.mm]-1,n[i.dd]))}e(".input-on-off").iphoneStyle();e(".input-on-off[toggle]").change(function(){if(e(this).is(":checked")){e(".input-list."+e(this).attr("toggle")).show();e(e(".input-on-off:not(.isdefaultplatform), .input-radio",".input-list."+e(this).attr("toggle")).get().reverse()).trigger("change")}else e(".input-list."+e(this).attr("toggle")).hide()});e(".input-radio[toggle]").change(function(){if(e(this).is(":checked")){e(".input-list."+e(this).attr("toggle")).hide();e(".input-list."+e(this).attr("toggle")+"-"+e(this).attr("value")).show();e(e(".input-on-off, .input-radio",".input-list."+e(this).attr("toggle")+"-"+e(this).attr("value")).get().reverse()).trigger("change")}});e(e(".input-on-off, .input-radio").get().reverse()).trigger("change");e(".colorpicker").wpColorPicker();e(".input-date").each(function(){var n=e(this);e(this).dateinput({trigger:!0,format:"dd mmmm yyyy",change:function(){var r=t(this.getValue("yyyy-mm-dd"))/1e3;e(n).siblings(".input-date-value").val(r)},onHide:function(){e(n).val()===""&&e(n).siblings(".input-date-value").val("")}})});e(".input-time").timeEntry({spinnerImage:"",show24Hours:!0});e(".time-trigger").click(function(t){t.preventDefault();e(".input-time",e(this).parent(".input-field")).focus()});e(".input-range").rangeinput({progress:!1});e(".upload-file-bt-box").each(function(){var t=e(this),n=e(t).parents(".input-field"),r=e(".dummy-input",n).attr("name");new qq.FileUploader({element:e(this)[0],action:ajaxurl,params:{action:"theme_ajax_action",method:"upload_file",allowedExtensions:e(".file-extensions",e(n)).attr("value").split(","),post_id:typeof e("#post_ID").attr("value")!="undefined"?e("#post_ID").attr("value"):"0"},multiple:!1,template:'<div class="qq-uploader"><div class="qq-upload-drop-area"><span>Drop files here to upload</span></div><div class="qq-upload-button">Upload a File</div><ul class="qq-upload-list"></ul></div>',onSubmit:function(t,r){e(".upload-image-bt-ajax-load",e(n)).show()},onComplete:function(t,i,s){e(".upload-image-bt-ajax-load",e(n)).hide();s.success?e(".uploaded-file-container",e(n)).html('<div class="uploaded-file">'+s.file_path+'<a class="remove" href="#">remove</a><input type="hidden" value="'+s.attach_id+'" name="'+r+'" /></div>').fadeIn():alert(s.error)}})});var n;window.wpActiveEditor=null;e(".upload-image").click(function(){var t=wp.media.editor.send.attachment,n=e(this),r=e(n).parent().find(".dummy-input").attr("name");wp.media.editor.send.attachment=function(i,s){if(e(n).parent().find("img").length){e(n).parent().find(".uploaded-image").remove();e(n).before('<div class="uploaded-image"><img src="'+s.url+'"/><a class="remove" href="#">remove</a><input type="hidden" value="'+s.id+'" name="'+r+'" /></div><div class="clear"></div>')}else e(n).before('<div class="uploaded-image"><img src="'+s.url+'"/><a class="remove" href="#">remove</a><input type="hidden" value="'+s.id+'" name="'+r+'" /></div><div class="clear"></div>');wp.media.editor.send.attachment=t};wp.media.editor.open();return!1});e(".upload-images").click(function(){var t=e(this),r=e(t).parent().find(".dummy-input").attr("name");n=wp.media.frames.tgm_media_frame=wp.media({multiple:!0,library:{type:"image"}});n.on("select",function(){var i=n.state().get("selection");i.map(function(n){n=n.toJSON();e(t).parent().find(".uploaded-images-container").append('<div class="uploaded-image"><img src="'+n.url+'"/><a class="remove" href="#">remove</a><input type="hidden" name="'+r+"[]"+'" value="'+n.id+'"/></div>')})});n.open()});e(".uploaded-image .remove, .uploaded-file .remove").live("click",function(t){t.preventDefault();e(this).parent().fadeOut(function(){e(this).remove()})});e(".uploaded-images-container").sortable({items:".uploaded-image",cursor:"move",placeholder:"uploaded-image-dummy"});e(".radio-img-list label").click(function(){e(".radio-img-list label",e(this).parents(".input-field")).removeClass("active");e(this).addClass("active")});e('.checkbox-img-list input[type="checkbox"]').change(function(){e(this).is(":checked")?e(this).siblings("label").addClass("active"):e(this).siblings("label").removeClass("active")});e("#theme-box-tabs ul li").click(function(t){t.preventDefault();if(!e(this).hasClass("active")){e("#theme-box-tabs ul li").removeClass("active");e(this).addClass("active");e("#theme-box-content .theme-box-content-pane").removeClass("active").hide();e("#theme-box-content .theme-box-content-pane:eq("+e(this).index()+")").addClass("active").fadeIn()}});e(".input-list:odd").addClass("odd");e("#theme-options-save").click(function(t){var n=e(this);e(".notification-box").html('<div class="ajax-load-icon"></div>saving â€¦').stop(!0,!0).fadeIn();var r={action:"theme_ajax_action",method:"save_option",options:e("#theme-options-form").serialize()},i=e.post(ajaxurl,r,function(t){e(".notification-box").html("Settings Saved").delay(1e3).fadeOut("slow");e("#advanced-theme_export_option").val(t.encodedOptions)},"json").fail(function(t,n,r){e(".notification-box").html("An Error Occured :/").delay(1e3).fadeOut("slow");console.log(r);console.log(n)});e("#advanced-theme_import_option").val()!=""&&location.reload()});e(".wp-list-table tbody").sortable({items:"tr",handle:".reorder-handle",axis:"y",placeholder:"ui-state-highlight",helper:function(t,n){var r=n.children(),i=n.clone();i.children().each(function(t){e(this).width(r.eq(t).width())});return i},start:function(t,n){e("tr.ui-state-highlight").append('<td colspan="0"></td>')},update:function(t,n){e(".ajax-load-icon",n.item).show();var r={action:"theme_ajax_action",method:"update_post_order",post_order:e(this).sortable("serialize")};e.post(ajaxurl,r,function(t){"ok"==t.result&&e(".ajax-load-icon",n.item).hide()},"json")}});e("input.isdefaultplatform").click(function(){jQuery("input.isdefaultplatform").not(this).removeAttr("checked")})});